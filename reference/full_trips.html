<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>R6 class full_trips — full_trips • t3</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="R6 class full_trips — full_trips"><meta property="og:description" content="Create R6 reference object class full_trips"><meta property="og:image" content="https://ob7-ird.github.io/t3/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">t3</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/running_processes_examples.html">Running processes examples</a>
    </li>
    <li>
      <a href="../articles/model_initialisation.html">Model initialisation and data selection</a>
    </li>
    <li>
      <a href="../articles/level_1.html">Level 1 process</a>
    </li>
    <li>
      <a href="../articles/level_2.html">Level 2 process</a>
    </li>
    <li>
      <a href="../articles/level_3.html">Level 3 process</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/OB7-IRD/t3/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>

    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>R6 class full_trips</h1>
    <small class="dont-index">Source: <a href="https://github.com/OB7-IRD/t3/blob/development/R/full_trips.R" class="external-link"><code>R/full_trips.R</code></a></small>
    <div class="hidden name"><code>full_trips.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create R6 reference object class full_trips</p>
    </div>


    <div id="super-class">
    <h2>Super class</h2>
    <p><code><a href="list_t3.html">t3::list_t3</a></code> -&gt; <code>full_trips</code></p>
    </div>
    <div id="methods">
    <h2>Methods</h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-full_trips-create_full_trips"><code>full_trips$create_full_trips()</code></a></p></li>
<li><p><a href="#method-full_trips-add_activities"><code>full_trips$add_activities()</code></a></p></li>
<li><p><a href="#method-full_trips-filter_by_years_period"><code>full_trips$filter_by_years_period()</code></a></p></li>
<li><p><a href="#method-full_trips-add_elementarylandings"><code>full_trips$add_elementarylandings()</code></a></p></li>
<li><p><a href="#method-full_trips-add_wells_samples"><code>full_trips$add_wells_samples()</code></a></p></li>
<li><p><a href="#method-full_trips-rf1"><code>full_trips$rf1()</code></a></p></li>
<li><p><a href="#method-full_trips-conversion_weight_category"><code>full_trips$conversion_weight_category()</code></a></p></li>
<li><p><a href="#method-full_trips-set_count"><code>full_trips$set_count()</code></a></p></li>
<li><p><a href="#method-full_trips-fishing_effort"><code>full_trips$fishing_effort()</code></a></p></li>
<li><p><a href="#method-full_trips-sample_length_class_ld1_to_lf"><code>full_trips$sample_length_class_ld1_to_lf()</code></a></p></li>
<li><p><a href="#method-full_trips-sample_number_measured_extrapolation"><code>full_trips$sample_number_measured_extrapolation()</code></a></p></li>
<li><p><a href="#method-full_trips-sample_length_class_step_standardisation"><code>full_trips$sample_length_class_step_standardisation()</code></a></p></li>
<li><p><a href="#method-full_trips-well_set_weight_categories"><code>full_trips$well_set_weight_categories()</code></a></p></li>
<li><p><a href="#method-full_trips-standardised_sample_creation"><code>full_trips$standardised_sample_creation()</code></a></p></li>
<li><p><a href="#method-full_trips-standardised_sample_set_creation"><code>full_trips$standardised_sample_set_creation()</code></a></p></li>
<li><p><a href="#method-full_trips-raised_factors_determination"><code>full_trips$raised_factors_determination()</code></a></p></li>
<li><p><a href="#method-full_trips-raised_standardised_sample_set"><code>full_trips$raised_standardised_sample_set()</code></a></p></li>
<li><p><a href="#method-full_trips-path_to_level3"><code>full_trips$path_to_level3()</code></a></p></li>
<li><p><a href="#method-full_trips-data_preparatory"><code>full_trips$data_preparatory()</code></a></p></li>
<li><p><a href="#method-full_trips-random_forest_models"><code>full_trips$random_forest_models()</code></a></p></li>
<li><p><a href="#method-full_trips-models_checking"><code>full_trips$models_checking()</code></a></p></li>
<li><p><a href="#method-full_trips-data_formatting_for_predictions"><code>full_trips$data_formatting_for_predictions()</code></a></p></li>
<li><p><a href="#method-full_trips-model_predictions"><code>full_trips$model_predictions()</code></a></p></li>
<li><p><a href="#method-full_trips-show_me_what_you_got"><code>full_trips$show_me_what_you_got()</code></a></p></li>
<li><p><a href="#method-full_trips-clone"><code>full_trips$clone()</code></a></p></li>
</ul></div><p><details><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="add"><a href="list_t3.html#method-add"><code>t3::list_t3$add()</code></a></span></li>
<li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="count"><a href="list_t3.html#method-count"><code>t3::list_t3$count()</code></a></span></li>
<li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="extract"><a href="list_t3.html#method-extract"><code>t3::list_t3$extract()</code></a></span></li>
<li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="extract_l1_element_value"><a href="list_t3.html#method-extract_l1_element_value"><code>t3::list_t3$extract_l1_element_value()</code></a></span></li>
<li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="filter"><a href="list_t3.html#method-filter"><code>t3::list_t3$filter()</code></a></span></li>
<li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="filter_l1"><a href="list_t3.html#method-filter_l1"><code>t3::list_t3$filter_l1()</code></a></span></li>
<li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="initialize"><a href="list_t3.html#method-initialize"><code>t3::list_t3$initialize()</code></a></span></li>
<li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="modification_l1"><a href="list_t3.html#method-modification_l1"><code>t3::list_t3$modification_l1()</code></a></span></li>
<li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="name"><a href="list_t3.html#method-name"><code>t3::list_t3$name()</code></a></span></li>
<li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="remove"><a href="list_t3.html#method-remove"><code>t3::list_t3$remove()</code></a></span></li>
<li><span class="pkg-link" data-pkg="t3" data-topic="list_t3" data-id="view"><a href="list_t3.html#method-view"><code>t3::list_t3$view()</code></a></span></li>
</ul></details></p><hr><a id="method-full_trips-create_full_trips"></a><div class="section">
<h3 id="method-create-full-trips-">Method <code>create_full_trips()</code><a class="anchor" aria-label="anchor" href="#method-create-full-trips-"></a></h3>
<p>Creation of full trip item from trips.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">create_full_trips</span><span class="op">(</span><span class="va">object_trips</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>object_trips</code></dt>
<dd><p>Object of type R6-trips expected. A R6 reference object of class trips.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-full_trips-add_activities"></a><div class="section">
<h3 id="method-add-activities-">Method <code>add_activities()</code><a class="anchor" aria-label="anchor" href="#method-add-activities-"></a></h3>
<p>Function for add activities in full trips object.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">add_activities</span><span class="op">(</span><span class="va">object_activities</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>object_activities</code></dt>
<dd><p>Object of type R6-activities expected. A R6 reference object of class activities.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-full_trips-filter_by_years_period"></a><div class="section">
<h3 id="method-filter-by-years-period-">Method <code>filter_by_years_period()</code><a class="anchor" aria-label="anchor" href="#method-filter-by-years-period-"></a></h3>
<p>Function for filter full trips by a year(s) period.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">filter_by_years_period</span><span class="op">(</span><span class="va">years_period</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>years_period</code></dt>
<dd><p>Object of class <a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a> expected. Year(s) in 4 digits format.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-full_trips-add_elementarylandings"></a><div class="section">
<h3 id="method-add-elementarylandings-">Method <code>add_elementarylandings()</code><a class="anchor" aria-label="anchor" href="#method-add-elementarylandings-"></a></h3>
<p>Function for add elementary landings in full trips object.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">add_elementarylandings</span><span class="op">(</span><span class="va">object_elementarylandings</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>object_elementarylandings</code></dt>
<dd><p>Object of type R6-elementarylandings expected. A R6 reference object of class elementarylandings.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-full_trips-add_wells_samples"></a><div class="section">
<h3 id="method-add-wells-samples-">Method <code>add_wells_samples()</code><a class="anchor" aria-label="anchor" href="#method-add-wells-samples-"></a></h3>
<p>Function for add wells and samples caracteristics in full trips object.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">add_wells_samples</span><span class="op">(</span><span class="va">object_wells</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>object_wells</code></dt>
<dd><p>Object of type R6-wells expected. A R6 reference object of class wells.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-full_trips-rf1"></a><div class="section">
<h3 id="method-rf-">Method <code>rf1()</code><a class="anchor" aria-label="anchor" href="#method-rf-"></a></h3>
<p>Process of Raising Factor level 1 (RF1 and RF2) calculation.
The RF1 aim to correct the weight visual estimation bias of catches filled in logbooks and correspond to the ratio of landing weight on catch weight, of the species defined by the <code>species_fao_codes_rf1</code> argument.
Raising Factor 2 (RF2) is not implemented yet but will be computed at this step.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">rf1</span><span class="op">(</span></span>
<span>  rf1_computation <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  apply_rf1_on_bycatch <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  species_fao_codes_rf1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"YFT"</span>, <span class="st">"SKJ"</span>, <span class="st">"BET"</span>, <span class="st">"ALB"</span>, <span class="st">"LOT"</span>, <span class="st">"MIX"</span>, <span class="st">"TUN"</span><span class="op">)</span>,</span>
<span>  species_fate_codes_rf1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  vessel_type_codes_rf1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  rf1_lowest_limit <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  rf1_highest_limit <span class="op">=</span> <span class="fl">1.2</span>,</span>
<span>  global_output_path <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>rf1_computation</code></dt>
<dd><p>Object of class <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> expected. If FALSE rf1 is not calculated (rf1=1 for all trips).
By default TRUE, the rf1 is calculated for each trip.</p></dd>


<dt><code>apply_rf1_on_bycatch</code></dt>
<dd><p>Object of class <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> expected. By default TRUE, rf1 values will be applied to all the logbook catches associated to the trip, including by-catch species.
If FALSE, only the catch weights of species belonging to the species list, defined by the <code>species_fao_codes_rf1</code> argument are corrected, rf1 is not applied to by-catch species.</p></dd>


<dt><code>species_fao_codes_rf1</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> expected.Specie(s) FAO code(s) used for the RF1 process.
By default, use codes YFT (<em>Thunnus albacares</em>), SKJ (<em>Katsuwonus pelamis</em>), BET (<em>Thunnus obesus</em>), ALB (<em>Thunnus alalunga</em>),
LOT (<em>Thunnus tonggol</em>) and TUN/MIX (mix of tunas species in Observe/AVDTH database) (French and Mayotte fleets).</p></dd>


<dt><code>species_fate_codes_rf1</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. By default 6 ("Retained, presumably destined for the cannery"). Specie(s) fate code(s) used for the RF1 process.</p></dd>


<dt><code>vessel_type_codes_rf1</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. By default 4, 5 and 6. Vessel type(s).</p></dd>


<dt><code>rf1_lowest_limit</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> expected. Verification value for the lowest limit of the RF1. By default 0.8.</p></dd>


<dt><code>rf1_highest_limit</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> expected. Verification value for the highest limit of the RF1. By default 1.2.</p></dd>


<dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>. Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h4>
<p>If a global_output_path is specified, the following outputs are extracted and saved in ".csv" format under the path: "global_output_path/level1/data/". <br></p><ul><li><p>process_1_1_detail: a table (.csv) with as many rows as elementary catches and 23 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>activity_id:  activity identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>activity_latitude:  activity latitude, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>activity_longitude:  activity longitude, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>trip_end_date:  trip end date (y-m-d format), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>rf1:  raising factor to correct the weight visual estimation bias of catches filled in logbooks.
 Rf1 is the ratio of landing weight on catch weight, of the species defined by the <code>species_fao_codes_rf1</code> argument.
 , type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>statut_rf1:  status rf1, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>rf2:  raising factor to correct missing logbook(s) not implemented yet (rf2=1), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>statut_rf2:  status rf2, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>species_fao_code:  species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>elementarycatch_id:  elementary catch identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>species_fate_code:  species fate codes, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.
 For example in Observe database :</p><ul><li><p>4 :  discarded alive.</p></li>
<li><p>5 :  discarded dead.</p></li>
<li><p>6 :  Retained, presumably destined for the cannery</p></li>
<li><p>8 :  used for crew consumption on board.</p></li>
<li><p>11 :  discarded status unknown (only for EMS and logbook).</p></li>
<li><p>15 :  retained for local market or dried/salted fish on board.</p></li>
</ul></li>
<li><p>landing_weight:  landing weight (without local market), in tonnes, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>catch_weight:  catch weight (visual estimation), in tonnes, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>catch_count:  catch count, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>catch_weight_rf2:  catch weight after visual estimation correction, in tonnes: <code>catch_weight_rf2=catch_weight x rf1 (x rf2)</code>
 (<a href="https://ob7-ird.github.io/t3/articles/level_1.html#process-1-1-raising-factors-level-1">Process 1.1: Raising Factors level 1</a>), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>statut_rf1_label:  status rf1 label, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>statut_rf2_label:  status rf2 label, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
</ul></li>
<li><p>process_1_1_global: a table (.csv) with as many rows as full trips and 17 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date (y-m-d format), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>rf1:  raising factor to correct the weight visual estimation bias of catches filled in logbooks.
 Rf1 is the ratio of landing weight on catch weight, of the species defined by the <code>species_fao_codes_rf1</code> argument.
, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>statut_rf1:  status rf1, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>rf2:  raising factor to correct missing logbook(s) not implemented yet (rf2=1), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>statut_rf2:  status rf2, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>landing_weight:  landing weight (without local market), in tonnes, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>catch_weight:  catch weight (visual estimation), in tonnes, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>catch_count:  catch count, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>catch_weight_rf2:  catch weight after visual estimation correction (tonnes): <code>catch_weight_rf2=catch_weight x rf1 (x rf2)</code>
 (<a href="https://ob7-ird.github.io/t3/reference/full_trips.html#method-full_trips-rf1"><code>full_trips$rf1()</code></a>), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>statut_rf1_label:  status rf1 label, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>statut_rf2_label:  status rf2 label, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
</ul></li>
</ul></div>


</div><p></p><hr><a id="method-full_trips-conversion_weight_category"></a><div class="section">
<h3 id="method-conversion-weight-category-">Method <code>conversion_weight_category()</code><a class="anchor" aria-label="anchor" href="#method-conversion-weight-category-"></a></h3>
<p>Process of logbook weight categories conversion. <br>
Logbook's weight categories change from one tuna fishing company to another, that involves overlaps and are hardly usable directly from the logbook.
This process aims to homogenize these weight categories and create simplify categories divided in function of the fishing school and the ocean:</p><ul><li><p>&lt; 10kg and &gt; 10kg for the floating object school in the Atlantic and Indian Ocean,</p></li>
<li><p>&lt; 10kg, 10-30kg and &gt; 30kg for undetermined and free school in the Atlantic Ocean,</p></li>
<li><p>&lt; 10kg and &gt; 10kg for undetermined and free school in the Indian Ocean.</p></li>
</ul><p>For each layer ocean/fishing school/specie/logbook weight category, a distribution key is applied for conversion to standardized weight categories.
Details of the distribution key is available in the vignette <a href="https://ob7-ird.github.io/t3/articles/level_1.html#process-1-2-logbook-weight-categories-conversion">Process 1.2: logbook weight categories conversion</a>.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">conversion_weight_category</span><span class="op">(</span></span>
<span>  global_output_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  referential_template <span class="op">=</span> <span class="st">"observe"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>. Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


<dt><code>referential_template</code></dt>
<dd><p>Object of class <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> expected.
By default "observe". Referential template selected (for example regarding the activity_code). You can switch to "avdth".</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-1">Details<a class="anchor" aria-label="anchor" href="#details-1"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level1/data/". <br>
 process_1_2: a table (.csv) with as many rows as elementary catches, plus the catches resulting from the conversion of weight categories and 23 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>activity_id:  activity identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>activity_latitude:  activity latitude, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>activity_longitude:  activity longitude, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>activity_date:  activity date, type <code><a href="https://rdrr.io/r/base/DateTimeClasses.html" class="external-link">POSIXct</a></code>.</p></li>
<li><p>ocean_code:  ocean code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.
  For example <code>ocean_code=1</code> for the Atlantic Ocean and <code>ocean_code=2</code> the Indian Ocean.</p></li>
<li><p>school_type_code: school type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.
  In Observe referential template: 1 for floating object school, 2 for free school and 0 for undetermined school.</p></li>
<li><p>elementarycatch_id:  elementary catch identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>species_fao_code:  species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>weight_category_code:  weight category code defined in logbooks, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>weight_category_min:  weight category's lower limit (kg), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>weight_category_max:  weight category's upper limit (kg), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>weight_category_label:  weight category label defined in logbooks, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>catch_weight_rf2:  catch weight after visual estimation correction  (tonnes): <code>catch_weight_rf2=catch_weight x rf1 (x rf2)</code>
 (<a href="https://ob7-ird.github.io/t3/articles/level_1.html#process-1-1-raising-factors-level-1">Process 1.1: Raising Factors level 1</a>), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>weight_category_code_corrected:  weight category after conversion, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>catch_weigh_category_code_corrected:  catch weight after weight category conversion (tonnes), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.<br>
  In fact, the catch weight corresponding to the logbook weight category can be divided between several corrected weight categories according to the distribution key applied for conversion to standardized weight categories.</p></li>
<li><p>catch_count:  catch count, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
</ul><p><br>
 If <code>referential_template="observe"</code>, values of <code>weight_category_min</code> and <code>weight_category_max</code> are used to convert logbook's weight categories to standard weight categories:
 We define the value : <code>delta_weight_category=weight_category_max - weight_category_min</code>, corresponding to the amplitude of the weight interval defined by a logbook weight category.
 Standard weight categories for species "YFT", "BET" and "ALB" are : + ("LOT")?? + arg species ?</p><ul><li><p>&lt; 10kg and &gt; 10kg for floating object school, undetermined and free school in the Indian Ocean and for the floating object school in the Atlantic Ocean:
 We calculate the proportion of the elementary catch to be allocated to the "&lt;10kg" standard weight category: <code>prop_minus10</code>,
 and the proportion to be assigned to the "&gt;10kg" standard weight category: <code>prop_plus10</code>.</p><ul><li><p>if <code>weight_category_min &gt;= 10 </code>:  <code>prop_plus10=1</code>,</p></li>
<li><p>if <code>weight_category_max &lt;= 10 </code>:  <code>prop_minus10=1</code>,</p></li>
<li><p>if <code>weight_category_min &lt; 10 </code> and <code>weight_category_max &gt; 10 </code>:  <code>prop_minus10 = (10 - weight_category_min) / delta_weight_category</code> and <code>prop_plus10=1-prop_minus10</code>.</p></li>
</ul></li>
<li><p>&lt; 10kg, 10-30kg and &gt; 30kg for undetermined and free school in the Atlantic Ocean:
 We calculate the proportion of the elementary catch to be allocated to the "&lt;10kg" standard weight category: <code>prop_minus10</code>,
 the proportion to be assigned to the "10-30kg" weight category: <code>prop_10_30</code>, and the proportion to be attributed to the "&gt;30kg" category: <code>prop_plus30</code>.</p><ul><li><p>if <code>weight_category_max &lt;= 10 </code>:  <code>prop_minus10=1</code>,</p></li>
<li><p>if <code>weight_category_min &gt;= 30 </code>:  <code>prop_plus30=1</code>,</p></li>
<li><p>if <code>weight_category_min &gt;= 10</code> and <code>weight_category_max &lt;= 30</code>:   <code>prop_10_30=1</code>,</p></li>
<li><p>if <code>weight_category_min &lt; 10</code> and <code>10 &lt; weight_category_max &lt; 30</code>:  <code>prop_minus10=(10 - weight_category_min) / delta_weight_category</code> and <code>prop_10_30=1-prop_minus10</code>,</p></li>
<li><p>if <code>weight_category_min &lt; 10 </code> and <code>weight_category_max &gt; 30</code>:</p><ul><li><p>if <code>!is.infinite(weight_category_max)</code>:  <code>prop_minus10 = (10 - weight_category_min) / delta_weight_category</code>, <code>prop_plus30= (weight_category_max - 30) /  delta_weight_category</code> and <code>prop_10_30= 1 - prop_minus10 - prop_plus30</code>,</p></li>
<li><p>if <code>is.infinite(weight_category_max)</code>:   <code>prop_minus10=(10 - weight_category_min) / (200-weight_category_min)</code>, <code>prop_10_30= (30 - weight_category_min) / (200-weight_category_min)</code>, <code>prop_plus30 = 1 - prop_minus10 - propr_10_30</code>.</p></li>
</ul></li>
<li><p>if <code>10 &lt;= weight_category_min &lt; 30 </code> and <code>weight_category_max &gt; 30 </code>:</p><ul><li><p>if <code>!is.infinite(weight_category_max)</code>:  <code>prop_10_30= (30 - weight_category_min) /  delta_weight_category</code> and <code>prop_plus30=1-prop_10_30</code>,</p></li>
<li><p>if <code>is.infinite(weight_category_max)</code>:  <code>prop_10_30=(30 - weight_category_min) / (200-weight_category_min)</code> and <code>prop_plus30=1-prop_10_30</code>.</p></li>
</ul></li>
</ul></li>
</ul><p>For species "SKJ" the standard weight category is "&lt;10kg" in all cases.
An "unknown" weight category is assigned to all other species than "SKJ", "YFT", "BET" and "ALB".</p>
</div>


</div><p></p><hr><a id="method-full_trips-set_count"></a><div class="section">
<h3 id="method-set-count-">Method <code>set_count()</code><a class="anchor" aria-label="anchor" href="#method-set-count-"></a></h3>
<p>Process for positive sets count.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">set_count</span><span class="op">(</span></span>
<span>  global_output_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  referential_template <span class="op">=</span> <span class="st">"observe"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>. Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


<dt><code>referential_template</code></dt>
<dd><p>Object of class <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> expected. By default "observe". Referential template selected (for example regarding the activity_code). You can switch to "avdth".</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-2">Details<a class="anchor" aria-label="anchor" href="#details-2"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level1/data/". <br>
 process_1_3: a table (.csv) with as many rows as activities and 15 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>activity_id:  activity identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>activity_latitude:  activity latitude, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>activity_longitude:  activity longitude, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>activity_date:  activity date, type <code><a href="https://rdrr.io/r/base/DateTimeClasses.html" class="external-link">POSIXct</a></code>.</p></li>
<li><p>activity_code:  activity code to define the type of activity, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>ocean_code:  ocean code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.
  For example <code>ocean_code=1</code> for the Atlantic Ocean and <code>ocean_code=2</code> the Indian Ocean.</p></li>
<li><p>school_type_code: school type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.
  In Observe referential template: 1 for floating object school, 2 for free school and 0 for undetermined school.</p></li>
<li><p>positive_set_count:  count of positive set (catch weight and/or catch count not zero), type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
</ul></div>


</div><p></p><hr><a id="method-full_trips-fishing_effort"></a><div class="section">
<h3 id="method-fishing-effort-">Method <code>fishing_effort()</code><a class="anchor" aria-label="anchor" href="#method-fishing-effort-"></a></h3>
<p>Process for set duration, time at sea, fishing time and searching time calculation (in hours).
Details about the methods are available in the vignette : <a href="https://ob7-ird.github.io/t3/articles/level_1.html#set-duration-calculation">Process 1.4: Fishing effort indicators calculation</a>.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">fishing_effort</span><span class="op">(</span></span>
<span>  <span class="va">set_duration_ref</span>,</span>
<span>  <span class="va">activity_code_ref</span>,</span>
<span>  sunrise_schema <span class="op">=</span> <span class="st">"sunrise"</span>,</span>
<span>  sunset_schema <span class="op">=</span> <span class="st">"sunset"</span>,</span>
<span>  global_output_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  referential_template <span class="op">=</span> <span class="st">"observe"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>set_duration_ref</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> or <code><a href="https://tibble.tidyverse.org/reference/tbl_df-class.html" class="external-link">tbl_df</a></code> expected.
Data and parameters for set duration calculation (by year, country, ocean and school type),
in the same format as the <a href="https://ob7-ird.github.io/t3/reference/set_duration_ref.html">referential set duration table</a>.
Duration in minutes in the reference table, converted into hours in output for subsequent processing).</p></dd>


<dt><code>activity_code_ref</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> or <code><a href="https://tibble.tidyverse.org/reference/tbl_df-class.html" class="external-link">tbl_df</a></code> expected.
Reference table with the activity codes to be taken into account for the allocation of sea and/or fishing time,
 and/or searching time and/or set duration.</p></dd>


<dt><code>sunrise_schema</code></dt>
<dd><p>Object of class <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> expected. Sunrise characteristic. By default "sunrise" (top edge of the sun appears on the horizon). See below for more details.</p></dd>


<dt><code>sunset_schema</code></dt>
<dd><p>Object of class <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a> expected. Sunset characteristic. By default "sunset" (sun disappears below the horizon, evening civil twilight starts).
See below for more details.</p></dd>


<dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


<dt><code>referential_template</code></dt>
<dd><p>Object of class <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> expected. By default "observe".
Referential template selected (for example regarding the activity_code). You can switch to "avdth".</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-3">Details<a class="anchor" aria-label="anchor" href="#details-3"></a></h4>
<p>Available variables are:</p><ul><li><p>"sunrise":  sunrise (top edge of the sun appears on the horizon)</p></li>
<li><p>"sunriseEnd":  sunrise ends (bottom edge of the sun touches the horizon)</p></li>
<li><p>"goldenHourEnd":  morning golden hour ends(soft light, best time for photography)</p></li>
<li><p>"solarNoon":  solar noon (sun is in the highest position)</p></li>
<li><p>"goldenHour":  evening golden hour starts</p></li>
<li><p>"sunsetStart":  sunset starts (bottom edge of the sun touches the horizon)</p></li>
<li><p>"sunset":  sunset (sun disappears below the horizon, evening civil twilight starts)</p></li>
<li><p>"dusk":  dusk (evening nautical twilight starts)</p></li>
<li><p>"nauticalDusk":  nautical dusk (evening astronomical twilight starts)</p></li>
<li><p>"night":  night starts (dark enough for astronomical observations)</p></li>
<li><p>"nadir":  nadir (darkest moment of the night, sun is in the lowest position)</p></li>
<li><p>"nightEnd":  night ends (morning astronomical twilight starts)</p></li>
<li><p>"nauticalDawn":  nautical dawn (morning nautical twilight starts)</p></li>
<li><p>"dawn":  dawn (morning nautical twilight ends, morning civil twilight starts)</p></li>
</ul><p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level1/data/". <br>
 process_1_4: a table (.csv) with as many rows as activities and 20 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>activity_id:  activity identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>activity_latitude:  activity latitude, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>activity_longitude:  activity longitude, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>activity_date:  activity date, type <code><a href="https://rdrr.io/r/base/DateTimeClasses.html" class="external-link">POSIXct</a></code>.</p></li>
<li><p>activity_code:  activity code to define the type of activity, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>objectoperation_code:  object operation code to define the type of floating object operation (in Observe referential), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>ocean_code:  ocean code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.
  For example <code>ocean_code=1</code> for the Atlantic Ocean and <code>ocean_code=2</code> the Indian Ocean.</p></li>
<li><p>school_type_code: school type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.
  In Observe referential template: 1 for floating object school, 2 for free school and 0 for undetermined school.</p></li>
<li><p>positive_set_count:  count of positive set (catch weight and/or catch count not zero), type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>set_duration:  set duration in hours, according to the <a href="https://ob7-ird.github.io/t3/reference/set_duration_ref.html">referential set duration table</a>, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>time_at_sea:  time at sea in hours, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>fishing_time:  fishing time in hours, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>searching_time:  searching time in hours, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.<br>
  Equal to the fishing time value minus the sum of the sets duration values.</p></li>
</ul></div>


</div><p></p><hr><a id="method-full_trips-sample_length_class_ld1_to_lf"></a><div class="section">
<h3 id="method-sample-length-class-ld-to-lf-">Method <code>sample_length_class_ld1_to_lf()</code><a class="anchor" aria-label="anchor" href="#method-sample-length-class-ld-to-lf-"></a></h3>
<p>Process for length conversion, if necessary, in length fork (lf). <br>
In fact, during the sampling process, fishes length can be collected and expressed in different standards. <br>
For example, regarding field constraints and more precisely the length of the different species, sampling data covered in T3 can by express in first dorsal length (LD1) or curved fork length (LF).<br>
 Generally, length of small individuals are provided in LF because it's logistically possible and easier to measure the entire fish, while length of bigger individuals are provided in LD1, for the same reciprocal reasons.
This step aims to standardize this standard among sampling data and at the end have only length sampling data expressed in LF. <br>
Historical and so far, the process use a referential <a href="https://ob7-ird.github.io/t3/reference/length_step.html">conversion table LD1 to LF</a>.
In addition, the <code>sample_number_measured</code> variable, in this step will be converted to a <code>sample_number_measured_lf</code> variable (notably due to the creation of new samples to split one LD1 class in multiples LF classes during certain conversions).</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">sample_length_class_ld1_to_lf</span><span class="op">(</span></span>
<span>  <span class="va">length_step</span>,</span>
<span>  global_output_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  referential_template <span class="op">=</span> <span class="st">"observe"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>length_step</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> or <code><a href="https://tibble.tidyverse.org/reference/tbl_df-class.html" class="external-link">tbl_df</a></code> expected.
Data frame object with length ratio between ld1 and lf class, in the same format as the <a href="https://ob7-ird.github.io/t3/reference/length_step.html">conversion table LD1 to LF</a>.</p></dd>


<dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>. Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


<dt><code>referential_template</code></dt>
<dd><p>Object of class <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> expected. By default "observe". Referential template selected (for example regarding the activity_code). You can switch to "avdth".</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-4">Details<a class="anchor" aria-label="anchor" href="#details-4"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level2/data/". <br>
 process_2_1: a table (.csv) with as many rows as elementary samples raw, plus the elementary samples raw created by certain conversions from LD1 TO LF classes, and 17 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>well_id:  well identification (unique topiaid from database (ps_logbook.well in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>school_type_code: school type code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
  In Observe referential template: "1" for floating object school, "2" for free school, "0" for undetermined school and "MIX" for a mixture of school types.</p></li>
<li><p>sample_id:  sample identification (unique topiaid from database (ps_logbook.sample in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sub_sample_id:  sub-sample identification number, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>elementarysampleraw_id:  elementarysampleraw identification (unique topiaid from database (ps_logbook.samplespeciesmeasure in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>species_fao_code:  species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sample_length_class:  sample length class (cm) of measured individuals in first dorsal length (LD1), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>sample_number_measured:  sample number of measured individuals in first dorsal length (LD1), type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>sample_length_class_lf:  sample length class  (cm) of measured individuals converted in curved fork length (LF), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>sample_number_measured_lf:  sample number of measured individuals converted for curved fork length (LF) distribution, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.
 For example, for one sample (<code>sample_number_measured=1</code>) from the Atlantic Ocean (1), of the species YFT (<em>Thunnus albacares</em>), with a first dorsal length class (LD1) measured at <code>sample_length_class=8</code> (cm),
 the LD1 to LF conversion will create a new elementary sample row because a percentage of <code>ratio=50</code> % of the number of fish in the sample will be assigned to the curved fork length class: <code>sample_number_measured_lf=32</code> (cm) ( <code>sample_number_measured_lf=0.5</code>)
 and 50% of this sample will obtain a <code>sample_number_measured_lf=34</code> (cm) with <code>sample_number_measured_lf=0.5</code>.</p></li>
</ul></div>


</div><p></p><hr><a id="method-full_trips-sample_number_measured_extrapolation"></a><div class="section">
<h3 id="method-sample-number-measured-extrapolation-">Method <code>sample_number_measured_extrapolation()</code><a class="anchor" aria-label="anchor" href="#method-sample-number-measured-extrapolation-"></a></h3>
<p>Process for sample number measured individuals extrapolation to sample number individuals counted.
In fact, during the sampling and according to the protocol, just a part of the sampled individuals are measured in relation to that counted.
The aim of this step is to extrapolate the number of individuals measured in the sample to the number of individuals counted in the sample.
To do that, a Raising Factor (RF4) is calculated per stratum, per well, per sample, per sub-sample and per species.
It is equal, by stratum, to the sum of each counted individuals divided by the sum of measured individuals (after conversion of measure in curved fork length in the process 2.1).</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">sample_number_measured_extrapolation</span><span class="op">(</span>global_output_path <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>. Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-5">Details<a class="anchor" aria-label="anchor" href="#details-5"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level2/data/". <br>
 process_2_2: a table (.csv) with as many rows as elementary samples raw, plus the elementary samples raw created by certain conversions from LD1 TO LF classes, and 18 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>well_id:  well identification (unique topiaid from database (ps_logbook.well in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>school_type_code: school type code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
  In Observe referential template: "1" for floating object school, "2" for free school, "0" for undetermined school and "MIX" for a mixture of school types.</p></li>
<li><p>sample_id:  sample identification (unique topiaid from database (ps_logbook.sample in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sub_sample_id:  sub-sample identification number, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>sub_sample_total_count_id:  sub sample identification bis in relation with the fish total count (unique topiaid from database (ps_logbook.samplespecies in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>elementarysampleraw_id:  elementarysampleraw identification (unique topiaid from database (ps_logbook.samplespeciesmeasure in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>species_fao_code:  species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sample_length_class_lf:  sample length class (cm) of measured individuals converted in curved fork length (LF), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>sample_number_measured_lf:  sample number of measured individuals converted for curved fork length (LF) distribution, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>sample_total_count:  total number of individuals counted for this sample, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>sample_number_measured_extrapolated_lf:  sample number of measured individuals (converted in LF) extrapolated to the sample number of counted individuals, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.<br><code>sample_number_measured_extrapolated_lf=sample_number_measured_lf x rf4</code>.</p></li>
</ul></div>


</div><p></p><hr><a id="method-full_trips-sample_length_class_step_standardisation"></a><div class="section">
<h3 id="method-sample-length-class-step-standardisation-">Method <code>sample_length_class_step_standardisation()</code><a class="anchor" aria-label="anchor" href="#method-sample-length-class-step-standardisation-"></a></h3>
<p>Process for step standardisation of lf length class.
 This step aims to standardize sample length classes. So far, these specifications are integrate in the process:</p><ul><li><p>a length classes step of 1cm for:  SKJ (<em>Katsuwonus pelamis</em>), LTA (<em>Euthynnus alletteratus</em>) and FRI (<em>Auxis thazard</em>),</p></li>
<li><p>a length classes step of 2cm fo:  YFT (<em>Thunnus albacares</em>), BET (<em>Thunnus obesus</em>) and ALB (<em>Thunnus alalunga</em>).</p></li>
</ul><p>To standardize the original sample's curved fork length (LF), the object "elementarysample" is created by  aggregation of elementary sample raw.</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">sample_length_class_step_standardisation</span><span class="op">(</span></span>
<span>  maximum_lf_class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>  global_output_path <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>maximum_lf_class</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. Theoretical maximum lf class that can occur (all species considerated). By default 500.</p></dd>


<dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>. Path of the global outputs directory.The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-6">Details<a class="anchor" aria-label="anchor" href="#details-6"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level2/data/". <br>
 process_2_3: a table (.csv) with as many rows as elementary samples, and 17 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>well_id:  well identification (unique topiaid from database (ps_logbook.well in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>school_type_code: school type code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
  In Observe referential template: "1" for floating object school, "2" for free school, "0" for undetermined school and "MIX" for a mixture of school types.</p></li>
<li><p>sample_id:  sample identification (unique topiaid from database (ps_logbook.sample in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sample_type_code:  sample type type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>sample_quality_code:  sample quality code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>sub_sample_id:  sub-sample identification number, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>species_fao_code:  species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sample_total_count:  total number of individuals counted for this sample, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>sample_standardised_length_class_lf:  standardized sample length class (cm) in curved fork length (LF), according to the species and step associated, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>sample_number_measured_extrapolated_lf:  standardized sample number of measured individuals (converted in LF and extrapolated in step <a href="https://ob7-ird.github.io/t3/articles/level_2.html#process-2-2-sample-number-measured-extrapolation">2.2</a>),
  type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
</ul></div>


</div><p></p><hr><a id="method-full_trips-well_set_weight_categories"></a><div class="section">
<h3 id="method-well-set-weight-categories-">Method <code>well_set_weight_categories()</code><a class="anchor" aria-label="anchor" href="#method-well-set-weight-categories-"></a></h3>
<p>Process for well set weight categories definition.
The sampling provides information at the well scale. However, a set can be split between several wells and the individuals sampled could belong to as many sets as there are in the well.
This process aim to compute a weighted weight, which represents the weight of a set in a well, according to the distribution of this set in all the wells.<br>
The overall formula is as follows:
\(WW = \frac{W1}{W2} \times WT\), where:</p><ul><li><p>WW:  is the weighted weight,</p></li>
<li><p>W1:  is the weight of the set in the well,</p></li>
<li><p>W2:  is the weight of the set in all the sampled wells,</p></li>
<li><p>WT:  the total set's weight.</p></li>
</ul><p>So far, the process is developed for the purse seiner.
Furthermore, a proportion of each sampling sets among the sampling well will be calculated in relation with the weighted weight:<br>
\(PWW = \frac{WW_{i,j}}{\sum_{i=1}^{n} WW_{i,j}}\), where:</p><ul><li><p>PWW:  is the proportional weighted weight,</p></li>
<li><p>\(WW_{i,j}\):  is the weighted weight of the current set i in well j.</p></li>
</ul><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">well_set_weight_categories</span><span class="op">(</span></span>
<span>  <span class="va">sample_set</span>,</span>
<span>  global_output_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  referential_template <span class="op">=</span> <span class="st">"observe"</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>sample_set</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> expected. Data frame object with weighted weigh of each set sampled.</p></dd>


<dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>. Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


<dt><code>referential_template</code></dt>
<dd><p>Object of class <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> expected. By default "observe". Referential template selected (for example regarding the activity_code). You can switch to "avdth".</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-7">Details<a class="anchor" aria-label="anchor" href="#details-7"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level2/data/". <br>
 process_2_4: a table (.csv) with as many rows as elementary samples, and 13 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>well_id:  well identification (unique topiaid from database (ps_logbook.well in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>activity_id:  activity identification (unique topiaid from database (ps_logbook.activity in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>school_type_code: school type code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
  In Observe referential template: "1" for floating object school, "2" for free school, "0" for undetermined school and "MIX" for a mixture of school types.</p></li>
<li><p>weighted_weight_minus10:  weighted catch weight of individuals in the less than 10 tonnes category (by well, in tonnes, considering all species), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>weighted_weight_plus10:  weighted catch weight of individuals in the over 10 kg category  (by well, in tonnes, considering all species), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>weighted_weight:  weighted catch weight (WW) of individuals (less and more 10kg categories, by well, in tonnes, considering all species), which represents the weight of a set in a well, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
</ul><p>To better understand what the process does, let's look at an example:<br>
 A set of 90 tonnes is display in 3 wells, 40 tonnes in the first one, 30 tonnes in the second and 20 tonnes in the last one.<br>
 The wells 2 and 3 were sampled but no the first one. For the second well, the weighted weight will be equal to 54 tonnes (30 / 50 x 90). <br>
 For the third one, the weighted weight will be equal to 36 tonnes (20 / 50 x 90).</p>
</div>


</div><p></p><hr><a id="method-full_trips-standardised_sample_creation"></a><div class="section">
<h3 id="method-standardised-sample-creation-">Method <code>standardised_sample_creation()</code><a class="anchor" aria-label="anchor" href="#method-standardised-sample-creation-"></a></h3>
<p>Object standardised sample creation.
This process aims to sum up the samples according to the update made from the processes 2.1 to 2.3 on sample data.
In this step we left behind all the notions of subsamples and we take into account the new-sample creation in the step above (for example when we make the conversion to LD1 to LF).
This step create a new object called standardized sample expressed at the scale of the trip, the well, the sample (id, quality and type) and the species.</p><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">standardised_sample_creation</span><span class="op">(</span>global_output_path <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>. Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-8">Details<a class="anchor" aria-label="anchor" href="#details-8"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level2/data/". <br>
 process_2_5: a table (.csv) with as many rows as standardized samples, and 12 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>well_id:  well identification (unique topiaid from database (ps_logbook.well in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sample_id:  sample identification (unique topiaid from database (ps_logbook.sample in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>species_fao_code:  species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sample_standardised_length_class_lf:  standardized sample length class in curved fork length (LF) (cm), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>sample_number_measured_extrapolated_lf:  standardized sample number of measured individuals (converted in LF and  extrapolated to all counted individuals), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.<br></p></li>
</ul></div>


</div><p></p><hr><a id="method-full_trips-standardised_sample_set_creation"></a><div class="section">
<h3 id="method-standardised-sample-set-creation-">Method <code>standardised_sample_set_creation()</code><a class="anchor" aria-label="anchor" href="#method-standardised-sample-set-creation-"></a></h3>
<p>R6 object standardised sample set creation.
In the previous processes and in the object standardized sample associated, samples is expressed at the well scale.<br>
In this step, the aim is to move to the expression of sample by well to sample by set. <br>
In the process <a href="https://ob7-ird.github.io/t3/articles/level_2.html#process-2-4-well-set-weight-categories">2.4</a>, a weighted weight (WW) and a proportion of this weighted weight (PWW) at the set scale, has been calculated.<br>
By combination of this value and elements of the object standardized sample, a new object called standardized sample set was created. Like explain before, this object is the expression of the sample at the set scale.<br>
Furthermore, this process made a conversion of the samples length measurements in weight by length weight relationships (LWR).<br>
LWR formulas take the form: \(RWT=a \times LF^b\), where:</p><ul><li><p>RWT:  is the round weight (kg),</p></li>
<li><p>LF:  is the curved fork length (cm),</p></li>
<li><p>parameters a and b comes from a references table as the <a href="https://ob7-ird.github.io/t3/reference/length_weight_relationship.html">Referential LWR table</a> and are dependent of of the species and potentially of the area (ocean or others) and the season.</p></li>
</ul><p>More detail information could be find on the regional fisheries management organisations (RFMOs) like <a href="https://www.iccat.int/" class="external-link">ICCAT</a> or <a href="https://iotc.org/" class="external-link">IOTC</a>.</p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">standardised_sample_set_creation</span><span class="op">(</span></span>
<span>  <span class="va">length_weight_relationship_data</span>,</span>
<span>  global_output_path <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>length_weight_relationship_data</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> or <code><a href="https://tibble.tidyverse.org/reference/tbl_df-class.html" class="external-link">tbl_df</a></code> expected.
Data frame object with parameters for length weight relationships, in the same format as the <a href="https://ob7-ird.github.io/t3/reference/length_weight_relationship.html">Referential LWR table</a>.</p></dd>


<dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-9">Details<a class="anchor" aria-label="anchor" href="#details-9"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level2/data/". <br>
 process_2_6: a table (.csv) with as many rows as , and 17 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>well_id:  well identification (unique topiaid from database (ps_logbook.well in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>activity_id:  activity identification (unique topiaid from database (ps_logbook.activity in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>school_type_code: school type code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
  In Observe referential template: "1" for floating object school, "2" for free school, "0" for undetermined school and "MIX" for a mixture of school types.</p></li>
<li><p>sample_id:  sample identification (unique topiaid from database (ps_logbook.sample in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>species_fao_code:  species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sample_standardised_length_class_lf:  standardized sample length class in curved fork length (LF) (cm), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>sample_number_weighted:  sample number of measured individuals weighted by set weight,  after conversion in LF and extrapolation to all counted individuals, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.<br><code>sample_number_weighted = sample_number_measured_extrapolated_lf * PWW</code>.</p></li>
<li><p>sample_weight_unit:  weight (kg) of one individual,
  calculated using length weight relationships as in <a href="https://ob7-ird.github.io/t3/reference/length_weight_relationship.html">Referential LWR table</a>: <code>sample_weight_unit = parameter_a * sample_standardised_length_class_lf ^ parameter_b</code>),
   type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>sample_weight:  weight (kg) of all measured individuals weighted by set weight, after conversion in LF and extrapolation to all counted individuals, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.<br><code>sample_weight = sample_weight_unit * sample_number_weighted</code>.</p></li>
<li><p>sample_category:  sample category ("-10kg" or "+10kg"), according to <code>sample_weight_unit</code> value, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
</ul></div>


</div><p></p><hr><a id="method-full_trips-raised_factors_determination"></a><div class="section">
<h3 id="method-raised-factors-determination-">Method <code>raised_factors_determination()</code><a class="anchor" aria-label="anchor" href="#method-raised-factors-determination-"></a></h3>
<p>Raised factors determination for weight sample set to set.
This step aims to check relevance of the object standardized sample set by calculation of 6 parameters at the scale of each well sets, if it's possible regarding data available:</p><ul><li><p>number and weight of sampled individuals, total and by weight categories (\(\leq\) 10kg or &gt; 10kg):
 </p><ul><li><p><code>weighted_samples_minus10</code>:  sum of <code>sample_weight</code> for sample weight category \(\leq\) 10 kg, from <code>standardised_sample_set</code> object,
   created at step <a href="https://ob7-ird.github.io/t3/reference/full_trips.html#method-full_trips-standardised_sample_set_creation">2.6</a>.</p></li>
<li><p><code>weighted_samples_plus10</code>:  sum of <code>sample_weight</code> for sample weight category &gt; 10 kg, from <code>standardised_sample_set</code> object,
   created at step <a href="https://ob7-ird.github.io/t3/reference/full_trips.html#method-full_trips-standardised_sample_set_creation">2.6</a>.</p></li>
<li><p><code>weighted_samples_total</code>:  sum of <code>sample_weight</code> for all sample weight categories (\(\leq\) 10 kg) and &gt; 10kg, from <code>standardised_sample_set</code> object,
   created at step <a href="https://ob7-ird.github.io/t3/reference/full_trips.html#method-full_trips-standardised_sample_set_creation">2.6</a>.</p></li>
</ul></li>
<li><p>three raising factors are calculated related to the weighted weight of the set (calculated at step <a href="https://ob7-ird.github.io/t3/reference/full_trips.html#method-full_trips-well_set_weight_categories">2.4</a> and weight of sampled individuals, total and by weight categories (\(\leq\) 10kg and &gt; 10kg):
 </p><ul><li><p><code>rf_minus10= weighted_weight_minus10 / weighted_samples_minus10</code></p></li>
<li><p><code>rf_plus10= weighted_weight_plus10 / weighted_samples_plus10</code></p></li>
<li><p><code>rf_total=weighted_weight / weighted_samples_total</code></p></li>
</ul></li>
</ul><p>The verification thresholds can be modified in the function parameters using the following arguments:</p><ul><li><p><code>threshold_rf_minus10</code>:  by default at 500,</p></li>
<li><p><code>threshold_rf_plus10</code>:  by default at 500,</p></li>
<li><p><code>threshold_frequency_rf_minus10</code>:  by default at 75,</p></li>
<li><p><code>threshold_frequency_rf_plus10</code>:  by default at 75,</p></li>
<li><p><code>threshold_rf_total</code>:  by default at 250.</p></li>
</ul><div class="section">
<h4 id="usage-15">Usage<a class="anchor" aria-label="anchor" href="#usage-15"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">raised_factors_determination</span><span class="op">(</span></span>
<span>  threshold_rf_minus10 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>  threshold_rf_plus10 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>  threshold_frequency_rf_minus10 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">75</span><span class="op">)</span>,</span>
<span>  threshold_frequency_rf_plus10 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">75</span><span class="op">)</span>,</span>
<span>  threshold_rf_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">250</span><span class="op">)</span>,</span>
<span>  global_output_path <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-15">Arguments<a class="anchor" aria-label="anchor" href="#arguments-15"></a></h4>
<p></p><div class="arguments"><dl><dt><code>threshold_rf_minus10</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. Threshold limit value for raising factor on individuals category minus 10. By default 500.</p></dd>


<dt><code>threshold_rf_plus10</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. Threshold limit value for raising factor on individuals category plus 10. By default 500.</p></dd>


<dt><code>threshold_frequency_rf_minus10</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. Threshold limit frequency value for raising factor on individuals category minus 10. By default 75.</p></dd>


<dt><code>threshold_frequency_rf_plus10</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. Threshold limit frequency value for raising factor on individuals category plus 10. By default 75.</p></dd>


<dt><code>threshold_rf_total</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. Threshold limit value for raising factor (all categories). By default 250.</p></dd>


<dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
Path of the global outputs directory. The function will create subsection if necessary.
 By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-10">Details<a class="anchor" aria-label="anchor" href="#details-10"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level2/data/". <br>
 process_2_7: a table (.csv) with as many rows as , and 14 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>well_id:  well identification (unique topiaid from database (ps_logbook.well in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>activity_id:  activity identification (unique topiaid from database (ps_logbook.activity in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>school_type_code: school type code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
  In Observe referential template: "1" for floating object school, "2" for free school, "0" for undetermined school and "MIX" for a mixture of school types.</p></li>
<li><p>weighted_samples_minus10:  weight of sampled individuals  (tonnes), for weight category (\(\leq\) 10kg, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>weighted_samples_plus10:  weight of sampled individuals (tonnes), for weight category &gt; 10kg, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>weighted_samples_total:  weight of sampled individuals  (tonnes), for all weight categories (\(\leq\) 10kg and &gt; 10kg), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>rf_validation:  raising factor status, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>rf_validation_label:  raising factor status label, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
</ul></div>


</div><p></p><hr><a id="method-full_trips-raised_standardised_sample_set"></a><div class="section">
<h3 id="method-raised-standardised-sample-set-">Method <code>raised_standardised_sample_set()</code><a class="anchor" aria-label="anchor" href="#method-raised-standardised-sample-set-"></a></h3>
<p>Application of raised factors calculated in process <a href="https://ob7-ird.github.io/t3/reference/full_trips.html#method-full_trips-raised_factors_determination">2.7</a> on standardised sample set.
This last step aim to express number and weight of sampled individuals at the scale of the set. The process use the factors calculated in the process <a href="https://ob7-ird.github.io/t3/articles/level_2.html#process-2-7-raised-factors-determination">2.7</a>.</p><div class="section">
<h4 id="usage-16">Usage<a class="anchor" aria-label="anchor" href="#usage-16"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">raised_standardised_sample_set</span><span class="op">(</span>global_output_path <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-16">Arguments<a class="anchor" aria-label="anchor" href="#arguments-16"></a></h4>
<p></p><div class="arguments"><dl><dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>. Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-11">Details<a class="anchor" aria-label="anchor" href="#details-11"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".csv" format under the path: "global_output_path/level2/data/". <br>
 process_2_8: a table (.csv) with as many rows as , and 15 columns:</p><ul><li><p>full_trip_id:  retained full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>full_trip_name:  full trip id, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>trip_id:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>trip_end_date:  trip end date, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>year_trip_end_date:  year of trip end, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_code:  vessel code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>vessel_type_code:  vessel type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>well_id:  well identification (unique topiaid from database (ps_logbook.well in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>activity_id:  activity identification (unique topiaid from database (ps_logbook.activity in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>school_type_code: school type code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
  In Observe referential template: "1" for floating object school, "2" for free school, "0" for undetermined school and "MIX" for a mixture of school types.</p></li>
<li><p>sample_id:  sample identification (unique topiaid from database (ps_logbook.sample in Observe)), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>species_fao_code:  species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sample_standardised_length_class_lf:  standardized sample length class in curved fork length (LF), (cm), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>sample_number_weighted_set:  sample number weighted by set, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>. <br><code>sample_number_weighted_set = sample_number_weighted * rf</code>, where :</p><ul><li><p><code>rf</code>:  is one of the raising factors calculated in the process <a href="https://ob7-ird.github.io/t3/articles/level_2.html#process-2-7-raised-factors-determination">2.7</a>,
  according to sample weight category (\(\leq\) 10kg and &gt; 10kg).</p></li>
<li><p><code>sample_number_weighted</code>:  is the sample number of measured individuals weighted by set weight, after conversion in LF and extrapolation to all counted individuals,
  calculated in the process <a href="https://ob7-ird.github.io/t3/articles/level_2.html#process-2-6-sample-number-standardisation">2.6</a>.</p></li>
</ul></li>
<li><p>sample_weight_set:  sample weight by set (tonnes), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.<br><code>sample_weight_set = sample_weight_unit/1000 * sample_number_weighted_set</code></p></li>
</ul></div>


</div><p></p><hr><a id="method-full_trips-path_to_level3"></a><div class="section">
<h3 id="method-path-to-level-">Method <code>path_to_level3()</code><a class="anchor" aria-label="anchor" href="#method-path-to-level-"></a></h3>
<p>Temporary link to the R object model with modelling level 3 process.</p><div class="section">
<h4 id="usage-17">Usage<a class="anchor" aria-label="anchor" href="#usage-17"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">path_to_level3</span><span class="op">(</span></span>
<span>  global_output_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  target_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-17">Arguments<a class="anchor" aria-label="anchor" href="#arguments-17"></a></h4>
<p></p><div class="arguments"><dl><dt><code>global_output_path</code></dt>
<dd><p>By default object of type <code><a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a></code> but object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.
Path of the global outputs directory. The function will create subsection if necessary.
By default NULL, for no outputs extraction. Outputs will be extracted, only if a global_output_path is specified.</p></dd>


<dt><code>target_year</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected.
Year of interest for the model estimation and prediction.
Default value is current year - 1. Used only if a <code>global_output_path</code> is specified.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details-12">Details<a class="anchor" aria-label="anchor" href="#details-12"></a></h4>
<p>If a global_output_path is specified, the following output is extracted and saved in ".RData" format under the path: "global_output_path/". <br>
 "inputs_level3_<code>target_year</code>_ocean_<code>ocean_code</code>_<code>country_(ies)</code>": a list of 5 <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code>:</p><ul><li><p>act:  a data.frame with as many rows as activities and 10 column:</p><ul><li><p>id_act:  activity identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>lat:  activity latitude, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>lon:  activity longitude, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>fmod:  fishing school type code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.<br>
  In Observe referential template: 1 for floating object school, 2 for free school and 0 for undetermined school.</p></li>
<li><p>date_act activity date, type <code><a href="https://rdrr.io/r/base/DateTimeClasses.html" class="external-link">POSIXct</a></code>.</p></li>
<li><p>vessel:  vessel identification code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>flag_code:  flag of the vessel, three letters country ISO 3 code(s), type <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a>.</p></li>
<li><p>id_trip:  trip identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>ocean:  ocean code, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.
  For example <code>ocean_code=1</code> for the Atlantic Ocean and <code>ocean_code=2</code> the Indian Ocean.</p></li>
<li><p>code_act_type:  activity code to define the type of activity, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
</ul></li>
<li><p>act3:  a data.frame with as many rows as elementary catches and 8 columns:</p><ul><li><p>id_act : activity identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>w_lb_t3 : catch weight  (tonnes) after weight category conversion in step <a href="https://ob7-ird.github.io/t3/articles/level_1.html#process-1-2-logbook-weight-categories-conversion">1.2</a>, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>sp_fate_code : species fate codes, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>. <br>
 For example in Observe database :</p><ul><li><p>4 :  discarded alive.</p></li>
<li><p>5 :  discarded dead.</p></li>
<li><p>6 :  Retained, presumably destined for the cannery</p></li>
<li><p>8 :  used for crew consumption on board.</p></li>
<li><p>11 :  discarded status unknown (only for EMS and logbook).</p></li>
<li><p>15 :  retained for local market or dried/salted fish on board.</p></li>
</ul></li>
<li><p>sp : species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>count : catch count, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
<li><p>wcat:  weight category after conversion to standard categories (&lt;10kg and &gt; 10kg or &gt;10kg, 10-30kg and &gt;30kg), in step <a href="https://ob7-ird.github.io/t3/articles/level_1.html#process-1-2-logbook-weight-categories-conversion">1.2</a>, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>date_act:  activity date, type <code><a href="https://rdrr.io/r/base/DateTimeClasses.html" class="external-link">POSIXct</a></code>.</p></li>
<li><p>code_act_type:  activity code to define the type of activity, type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code>.</p></li>
</ul></li>
<li><p>samw:  a data.frame with 4 columns:</p><ul><li><p>id_act:  activity identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>sp:  species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>wcat:  sample weight category (less than 10kg: "-10kg" or more than 10 kg: "+10kg"), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>. <br>
 Output named <code>sample_category</code> from step <a href="https://ob7-ird.github.io/t3/articles/level_2.html#process-2-6-sample-number-standardisation">2.6</a>.</p></li>
<li><p>w_fit_t3:  sample weight by set (activity) in tonnes, type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>. <br>
 Output named <code>sample_weight_set</code> from step <a href="https://ob7-ird.github.io/t3/articles/level_2.html#process-2-8-samples-number-standardisation-at-set-scale">2.8</a></p></li>
</ul></li>
<li><p>sset:  a data.frame with 4 columns:</p><ul><li><p>id_act:  activity identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>id_sample:  sample identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>quality sample quality identification code, type <a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a>.<br>
  For example in Observe referential, a sample with <code>quality=1</code> corresponds to a "Super-T3" sample and the <code>quality=3</code> is for "Biology" sample.</p></li>
<li><p>type sample type identification code, type <a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a>. <br>
 For example in Observe referential, a sample with <code>type=1</code> corresponds to a "At landing" sample.</p></li>
</ul></li>
<li><p>wp:  a data.frame with 6 columns:</p><ul><li><p>id_well well identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>id_act:  activity identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>id_sample:  sample identification (unique topiaid from database), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>code3l:  species FAO code, type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
<li><p>weight:  well plan's weight declared (tonnes), type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code>.</p></li>
<li><p>wcat_well:  well's category declared (less than 10kg: "-10kg" or more than 10 kg: "+10kg"), type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code>.</p></li>
</ul></li>
</ul><p>@aliases path_to_level3</p>
</div>

<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>a list of 5 <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> or <code><a href="https://tibble.tidyverse.org/reference/tbl_df-class.html" class="external-link">tbl_df</a></code> <code>process_level3$raw_inputs_level3$</code>:</p><ul><li><p><code>act</code>:  a data table recording the activities ID, date, type, coordinates, fishing school type and associated trip ID, as well as the vessel, ocean and flag codes.</p></li>
<li><p><code>act3</code>:  a data table recording the  activities ID, date and type and associated catches (species, species fate code, weight, count and standard weight category).</p></li>
<li><p><code>samw</code>:  a data table recording the samples species, weight and weight category by activity (ID).</p></li>
<li><p><code>sset</code>:  a data table recording the samples ID, type and quality by activity (ID).</p></li>
<li><p><code>wp</code>:  a data table recording the well plan, i.e. the well ID and corresponding activities and samples ID with associated species, sample weight and well's weight category (+10kg or -10kg).</p></li>
</ul></div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
process_level3 &lt;- object_full_trips$path_to_level3(global_output_path = final_output_path)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-full_trips-data_preparatory"></a><div class="section">
<h3 id="method-data-preparatory-">Method <code>data_preparatory()</code><a class="anchor" aria-label="anchor" href="#method-data-preparatory-"></a></h3>
<p>Data preparatory for the t3 modelling process (level 3).</p><div class="section">
<h4 id="usage-18">Usage<a class="anchor" aria-label="anchor" href="#usage-18"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">data_preparatory</span><span class="op">(</span></span>
<span>  inputs_level3 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  inputs_level3_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">output_directory</span>,</span>
<span>  periode_reference_level3 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  target_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  period_duration <span class="op">=</span> <span class="fl">4L</span>,</span>
<span>  target_ocean <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  distance_maximum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,</span>
<span>  number_sets_maximum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,</span>
<span>  set_weight_minimum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  minimum_set_frequency <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  vessel_id_ignored <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-18">Arguments<a class="anchor" aria-label="anchor" href="#arguments-18"></a></h4>
<p></p><div class="arguments"><dl><dt><code>inputs_level3</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> expected.
Inputs of levels 3 (see function path to level 3).</p></dd>


<dt><code>inputs_level3_path</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> expected.
Path to the folder containing yearly data output of the level 1 and 2 (output of the function the path to level 3).
If provide, replace the inputs_level3 object.</p></dd>


<dt><code>output_directory</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> expected.
Path of the outputs directory.</p></dd>


<dt><code>periode_reference_level3</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected.
Year(s) period of reference for modelling estimation.</p></dd>


<dt><code>target_year</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected.
Year of interest for the model estimation and prediction.
Default value is current year - 1.</p></dd>


<dt><code>period_duration</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected.
Number of years use for the modelling. The default value is 5</p></dd>


<dt><code>target_ocean</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected.
The code of ocean of interest.</p></dd>


<dt><code>distance_maximum</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected.
Maximum distance between all sets of a sampled well. By default 5.</p></dd>


<dt><code>number_sets_maximum</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected.
Maximum number of sets allowed in mixture. By default 5.</p></dd>


<dt><code>set_weight_minimum</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected.
Minimum set size considered. Remove smallest set for which sample could not be representative.
By default 6 t.</p></dd>


<dt><code>minimum_set_frequency</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> expected.
Minimum threshold proportion of set in a well to be used for model training in the process.
By default 0.1.</p></dd>


<dt><code>vessel_id_ignored</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected.
Specify list of vessel(s) id(s) to be ignored in the model estimation and prediction.
By default NULL.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-full_trips-random_forest_models"></a><div class="section">
<h3 id="method-random-forest-models-">Method <code>random_forest_models()</code><a class="anchor" aria-label="anchor" href="#method-random-forest-models-"></a></h3>
<p>Modelling proportions in sets througth random forest models.</p><div class="section">
<h4 id="usage-19">Usage<a class="anchor" aria-label="anchor" href="#usage-19"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">random_forest_models</span><span class="op">(</span></span>
<span>  <span class="va">output_level3_process1</span>,</span>
<span>  num.trees <span class="op">=</span> <span class="fl">1000L</span>,</span>
<span>  mtry <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  min.node.size <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  seed_number <span class="op">=</span> <span class="fl">7L</span>,</span>
<span>  small_fish_only <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-19">Arguments<a class="anchor" aria-label="anchor" href="#arguments-19"></a></h4>
<p></p><div class="arguments"><dl><dt><code>output_level3_process1</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> expected. Output table data_lb_sample_screened from process 3.1.</p></dd>


<dt><code>num.trees</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. Number of trees to grow. This should not be set to too small a number, to ensure that every input row gets predicted at least a few times. The default value is 1000.</p></dd>


<dt><code>mtry</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. Number of variables randomly sampled as candidates at each split. The default value is 2.</p></dd>


<dt><code>min.node.size</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> expected. Minimum size of terminal nodes. Setting this number larger causes smaller trees to be grown (and thus take less time).The default value is 5.</p></dd>


<dt><code>seed_number</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. Set the initial seed for the modelling. The default value is 7.</p></dd>


<dt><code>small_fish_only</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> expected. Whether the model estimate proportion for small fish only (&lt; 10 kg).</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-full_trips-models_checking"></a><div class="section">
<h3 id="method-models-checking-">Method <code>models_checking()</code><a class="anchor" aria-label="anchor" href="#method-models-checking-"></a></h3>
<p>Load each full model and compute figure and tables to check the model quality. Furthermore, create a map of samples used for each model and relationship between logbook reports and samples.</p><div class="section">
<h4 id="usage-20">Usage<a class="anchor" aria-label="anchor" href="#usage-20"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">models_checking</span><span class="op">(</span></span>
<span>  <span class="va">output_level3_process2</span>,</span>
<span>  <span class="va">output_directory</span>,</span>
<span>  plot_sample <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  avdth_patch_coord <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-20">Arguments<a class="anchor" aria-label="anchor" href="#arguments-20"></a></h4>
<p></p><div class="arguments"><dl><dt><code>output_level3_process2</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></code> expected. Outputs models and data from process 3.2.</p></dd>


<dt><code>output_directory</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> expected. Outputs directory path.</p></dd>


<dt><code>plot_sample</code></dt>
<dd><p><code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code>. Whether the sample figure is computed. Default value = F</p></dd>


<dt><code>avdth_patch_coord</code></dt>
<dd><p>parameter waiting for coordinate conversion patch from avdth database</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-full_trips-data_formatting_for_predictions"></a><div class="section">
<h3 id="method-data-formatting-for-predictions-">Method <code>data_formatting_for_predictions()</code><a class="anchor" aria-label="anchor" href="#method-data-formatting-for-predictions-"></a></h3>
<p>Formatting data for model predictions.</p><div class="section">
<h4 id="usage-21">Usage<a class="anchor" aria-label="anchor" href="#usage-21"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">data_formatting_for_predictions</span><span class="op">(</span></span>
<span>  <span class="va">inputs_level3</span>,</span>
<span>  <span class="va">output_level3_process1</span>,</span>
<span>  <span class="va">target_year</span>,</span>
<span>  vessel_id_ignored <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  country_flag <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  input_type <span class="op">=</span> <span class="st">"observe_database"</span>,</span>
<span>  small_fish_only <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-21">Arguments<a class="anchor" aria-label="anchor" href="#arguments-21"></a></h4>
<p></p><div class="arguments"><dl><dt><code>inputs_level3</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> expected. Inputs of levels 3 (see function path to level 3).</p></dd>


<dt><code>output_level3_process1</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> expected. Output table data_lb_sample_screened from process 3.1.</p></dd>


<dt><code>target_year</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. The year of interest for the model estimation and prediction.</p></dd>


<dt><code>vessel_id_ignored</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></code> expected. Specify here vessel(s) id(s) if you want to ignore it in the model estimation and prediction .By default NULL.</p></dd>


<dt><code>country_flag</code></dt>
<dd><p>Three letters FAO flag code of country to estimate catches.</p></dd>


<dt><code>input_type</code></dt>
<dd><p>Type of coding use in different databases. Default value is 'observe_database'. Values can be 'observe_database' or 'avdth_database'.</p></dd>


<dt><code>small_fish_only</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> expected. Whether the model estimate proportion for small fish only (&lt; 10 kg).</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-full_trips-model_predictions"></a><div class="section">
<h3 id="method-model-predictions-">Method <code>model_predictions()</code><a class="anchor" aria-label="anchor" href="#method-model-predictions-"></a></h3>
<p>Model predictions for the species composition and computing of catches.</p><div class="section">
<h4 id="usage-22">Usage<a class="anchor" aria-label="anchor" href="#usage-22"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">model_predictions</span><span class="op">(</span></span>
<span>  <span class="va">output_level3_process2</span>,</span>
<span>  <span class="va">output_level3_process4</span>,</span>
<span>  <span class="va">output_directory</span>,</span>
<span>  country_flag <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ci <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ci_type <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  Nboot <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  plot_predict <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-22">Arguments<a class="anchor" aria-label="anchor" href="#arguments-22"></a></h4>
<p></p><div class="arguments"><dl><dt><code>output_level3_process2</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></code> expected. Outputs from level 3 process 2 (random forest models).</p></dd>


<dt><code>output_level3_process4</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></code> expected. Outputs from level 3 process 4 (data formatting for predictions).</p></dd>


<dt><code>output_directory</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></code> expected. Outputs directory path.</p></dd>


<dt><code>country_flag</code></dt>
<dd><p>Three letters FAO flag code of country to estimate catches.</p></dd>


<dt><code>ci</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> expected. Logical indicating whether confidence interval is computed. The default value is FALSE as it is a time consuming step.</p></dd>


<dt><code>ci_type</code></dt>
<dd><p>Type of confidence interval to compute. The default value is "all". Other options are "set" for ci on each set, "t1" for ci on nominal catch by species, "t1-fmod" for ci on nominal catch by species and fishing mode "t2" and "t2-fmod" for ci by 1 degree square and month. A vector of several ci option can be provided. ci_type are computed only if  the ci parameter is TRUE.</p></dd>


<dt><code>Nboot</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></code> expected. The number of bootstrap samples desired for the ci computation. The default value is 10.</p></dd>


<dt><code>plot_predict</code></dt>
<dd><p>Object of type <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></code> expected. Logical indicating whether maps of catch at size have to be done.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-full_trips-show_me_what_you_got"></a><div class="section">
<h3 id="method-show-me-what-you-got-">Method <code>show_me_what_you_got()</code><a class="anchor" aria-label="anchor" href="#method-show-me-what-you-got-"></a></h3>
<p>Most powerfull and "schwifty" function in the univers for "open the T3 process" and manipulate in live R6 objects.</p><div class="section">
<h4 id="usage-23">Usage<a class="anchor" aria-label="anchor" href="#usage-23"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">show_me_what_you_got</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-full_trips-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-24">Usage<a class="anchor" aria-label="anchor" href="#usage-24"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">full_trips</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-23">Arguments<a class="anchor" aria-label="anchor" href="#arguments-23"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `full_trips$path_to_level3`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">process_level3</span> <span class="op">&lt;-</span> <span class="va">object_full_trips</span><span class="op">$</span><span class="fu">path_to_level3</span><span class="op">(</span>global_output_path <span class="op">=</span> <span class="va">final_output_path</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jeanne Clément, Mathieu Depetris, Antoine Duparc, Pascal Cauquil, Laurent Floc’h, Julien Lebranchu, IRD - Ob7 Observatory of Exploited Tropical Pelagic Ecosystems.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({


    apiKey: 'b232a295f4339cb13abbd7adee1da479',
    indexName: 'ob7-ird',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

